# âœ… DeepACO è¯¦ç»†è¾“å‡ºå·²é…ç½®å®Œæˆ

## ğŸ‰ æ–°å¢åŠŸèƒ½

å·²æˆåŠŸä¸ºDeepACOè®­ç»ƒè¿‡ç¨‹æ·»åŠ è¯¦ç»†çš„è¿›åº¦è¾“å‡ºï¼ç°åœ¨ä½ å¯ä»¥å®æ—¶çœ‹åˆ°ï¼š

### ğŸ“Š æ¯ä¸ªBatchçš„ä¿¡æ¯
```
âš¡ Epoch 1 | Batch 1/196 (0.5%) | Loss: 12.3456 | Time: 28.34s | Avg: 28.34s/batch | ETA: 92.5min
```

### ğŸœ DeepACOç‰¹å®šä¿¡æ¯ï¼ˆæ¯5ä¸ªbatchï¼‰
```
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸœ DeepACO Batch 1 Processing...
   ğŸœ Number of Ants: 30
   ğŸ”„ ACO Iterations: 1
   ğŸ”§ Local Search: Enabled
   â° Start Time: 17:08:35
   âœ… Batch Completed in 28.34s
   ğŸ“‰ Loss: 12.3456
   ğŸ¯ Reward: -14.5678
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

### ğŸ“ˆ Epochæ€»ç»“
```
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Epoch 1 Completed
   â±ï¸  Time: 89.23 minutes
   ğŸ“‰ Train Loss: 11.2345
   ğŸ¯ Train Reward: -14.5678
   âš¡ Avg Batch Time: 27.34s
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### é€‰é¡¹1ï¼šæµ‹è¯•æ–°åŠŸèƒ½ï¼ˆæ¨èï¼Œ2-3åˆ†é’Ÿå®Œæˆï¼‰

```bash
cd /root/autodl-tmp/rl4co-urban
bash scripts/test_verbose_output.sh
```

è¿™ä¼šä½¿ç”¨å°æ•°æ®é›†å¿«é€Ÿè®­ç»ƒï¼Œè®©ä½ ç«‹å³çœ‹åˆ°è¯¦ç»†è¾“å‡ºæ•ˆæœã€‚

### é€‰é¡¹2ï¼šæ­£å¼è®­ç»ƒï¼ˆå¸¦è¯¦ç»†è¾“å‡ºï¼‰

```bash
# æ ‡å‡†TSPè®­ç»ƒï¼Œç°åœ¨ä¼šæ˜¾ç¤ºè¯¦ç»†è¿›åº¦
bash scripts/train_tsp.sh

# æˆ–ä½¿ç”¨è¯¦ç»†è¾“å‡ºç‰ˆæœ¬ï¼ˆåŒæ—¶ä¿å­˜åˆ°æ—¥å¿—æ–‡ä»¶ï¼‰
bash scripts/train_tsp_verbose.sh
```

### é€‰é¡¹3ï¼šè‡ªå®šä¹‰è®­ç»ƒ

```bash
python train.py \
  --problem TSP \
  --num-loc 100 \
  --model-type DeepACO \
  --epochs 10 \
  --batch-size 512 \
  ...
```

æ‰€æœ‰è®­ç»ƒéƒ½ä¼šè‡ªåŠ¨æ˜¾ç¤ºè¯¦ç»†è¾“å‡ºï¼

## ğŸ“ è¾“å‡ºå†…å®¹

### è®­ç»ƒå¯åŠ¨
- æ€»epochæ•°
- æ¨¡å‹ç±»å‹
- èš‚èšæ•°é‡é…ç½®
- ACOè¿­ä»£æ¬¡æ•°

### è®­ç»ƒè¿‡ç¨‹ï¼ˆæ¯ä¸ªbatchï¼‰
- å½“å‰è¿›åº¦ï¼ˆç™¾åˆ†æ¯”ï¼‰
- å½“å‰Loss
- Batchè€—æ—¶
- å¹³å‡è€—æ—¶
- é¢„è®¡å‰©ä½™æ—¶é—´ï¼ˆETAï¼‰

### DeepACOè¯¦ç»†ä¿¡æ¯ï¼ˆæ¯5ä¸ªbatchï¼‰
- èš‚èšæ•°é‡
- ACOè¿­ä»£æ¬¡æ•°
- æ˜¯å¦å¯ç”¨å±€éƒ¨æœç´¢
- è¯¦ç»†çš„Rewardä¿¡æ¯

### Epochå®Œæˆ
- æ€»è€—æ—¶
- è®­ç»ƒLoss
- è®­ç»ƒReward
- å¹³å‡Batchæ—¶é—´

### éªŒè¯é˜¶æ®µ
- éªŒè¯è€—æ—¶
- éªŒè¯Reward

## âš™ï¸ è‡ªå®šä¹‰é…ç½®

å¦‚æœè§‰å¾—è¾“å‡ºå¤ªå¤šæˆ–å¤ªå°‘ï¼Œå¯ä»¥ç¼–è¾‘ `train.py` ç¬¬506-516è¡Œï¼š

```python
# è°ƒæ•´è¿™äº›å‚æ•°
detailed_progress = DetailedProgressCallback(
    print_every_n_batches=1,  # æ”¹ä¸º5æˆ–10å‡å°‘è¾“å‡º
    print_every_n_epochs=1
)

deepaco_progress = DeepACOProgressCallback(
    print_every_n_batches=5  # æ”¹ä¸º1å¢åŠ è¾“å‡ºï¼Œæ”¹ä¸º10å‡å°‘è¾“å‡º
)
```

## ğŸ“ æ–°å¢æ–‡ä»¶

```
rl4co-urban/
â”œâ”€â”€ callbacks/
â”‚   â”œâ”€â”€ __init__.py                          # CallbacksåŒ…åˆå§‹åŒ–
â”‚   â””â”€â”€ training_progress.py                 # è¯¦ç»†è¿›åº¦å›è°ƒç±»
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ test_verbose_output.sh              # å¿«é€Ÿæµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ train_tsp_verbose.sh                # è¯¦ç»†è¾“å‡ºè®­ç»ƒè„šæœ¬
â”‚   â””â”€â”€ monitor_training.sh                  # ç›‘æ§è„šæœ¬
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ verbose_output_usage.md             # è¯¦ç»†ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ training_output_guide.md            # è®­ç»ƒè¾“å‡ºæŒ‡å—
â”‚   â””â”€â”€ deepaco_config.md                   # DeepACOé…ç½®æŒ‡å—
â””â”€â”€ train.py                                 # å·²æ›´æ–°ï¼šé›†æˆè¯¦ç»†è¾“å‡º
```

## ğŸ”§ å…¶ä»–ç›‘æ§å·¥å…·

### 1. å®æ—¶ç›‘æ§è„šæœ¬
```bash
# å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œ
bash scripts/monitor_training.sh

# æˆ–è‡ªåŠ¨åˆ·æ–°
watch -n 5 bash scripts/monitor_training.sh
```

### 2. TensorBoard
```bash
tensorboard --logdir logs --port 6006
# æµè§ˆå™¨è®¿é—® http://localhost:6006
```

### 3. ä¿å­˜è¾“å‡ºåˆ°æ–‡ä»¶
```bash
python train.py ... 2>&1 | tee training_$(date +%Y%m%d_%H%M%S).log
```

### 4. CSVæ—¥å¿—
è®­ç»ƒä¼šè‡ªåŠ¨ä¿å­˜CSVæ ¼å¼çš„metricsåˆ°ï¼š
```
logs/TSP_DeepACO_csv/version_X/metrics.csv
```

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- **å®Œæ•´ä½¿ç”¨æŒ‡å—**: `docs/verbose_output_usage.md`
- **è®­ç»ƒè¾“å‡ºæŒ‡å—**: `docs/training_output_guide.md`
- **DeepACOé…ç½®**: `docs/deepaco_config.md`

## ğŸ¯ é¢„æœŸæ•ˆæœ

ç°åœ¨è¿è¡Œè®­ç»ƒæ—¶ï¼Œä½ ä¼šçœ‹åˆ°ï¼š

```
================================================================================
ğŸš€ TRAINING STARTED
================================================================================
ğŸ“Š Total Epochs: 10
ğŸ¯ Model: DeepACO
ğŸœ Ants (train): 30
ğŸœ Ants (val): 48
ğŸ”„ Iterations (train): 1
================================================================================

================================================================================
ğŸ“… Epoch 1/10 Started
================================================================================

âš¡ Epoch 1 | Batch 1/196 (0.5%) | Loss: 12.3456 | Time: 28.34s | Avg: 28.34s/batch | ETA: 92.5min
âš¡ Epoch 1 | Batch 2/196 (1.0%) | Loss: 12.1234 | Time: 26.12s | Avg: 27.23s/batch | ETA: 88.1min
...
```

**ä¸å†æ˜¯é»‘å±ç­‰å¾…ï¼ç°åœ¨ä½ å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°è®­ç»ƒçš„æ¯ä¸€æ­¥ï¼** ğŸ‰

## âœ… éªŒè¯å®‰è£…

è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ä¸€åˆ‡æ­£å¸¸ï¼š

```bash
cd /root/autodl-tmp/rl4co-urban
python -c "from callbacks.training_progress import DetailedProgressCallback, DeepACOProgressCallback; print('âœ… è¯¦ç»†è¾“å‡ºåŠŸèƒ½å·²å°±ç»ª')"
```

## ğŸš€ ç«‹å³å°è¯•

```bash
# å¿«é€Ÿæµ‹è¯•ï¼ˆ2-3åˆ†é’Ÿï¼‰
bash scripts/test_verbose_output.sh
```

äº«å—è¯¦ç»†çš„è®­ç»ƒè¿›åº¦è¾“å‡ºå§ï¼ğŸŠ
